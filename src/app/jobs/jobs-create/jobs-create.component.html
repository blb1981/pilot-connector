<mat-card class="card">
  <mat-card-header class="card-header">
    <mat-card-title> Post a New Job </mat-card-title>
  </mat-card-header>

  <mat-card-content>
    <form [formGroup]="form" (submit)="onSaveJob()" *ngIf="!isLoading">
      <mat-form-field appearance="outline" class="form-field">
        <mat-label>Job title</mat-label>
        <input
          matNativeControl
          type="text"
          name="title"
          formControlName="title"
          [disabled]="isLoading"
        />
        <mat-error *ngIf="form.get('title').invalid">error message</mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="form-field">
        <mat-label>Job description</mat-label>
        <textarea
          matNativeControl
          name="content"
          id=""
          cols="30"
          rows="10"
          placeholder="Job description"
          formControlName="content"
          [disabled]="isLoading"
        ></textarea>
        <mat-error *ngIf="form.get('content').invalid">error message</mat-error>
      </mat-form-field>

      <mat-card-actions>
        <button mat-raised-button (click)="filePicker.click()">
          Choose Image
        </button>
        <input
          #filePicker
          hidden="true"
          type="file"
          onclick="this.value=null"
          (change)="onImagePicked($event)"
        />
      </mat-card-actions>

      <mat-card-actions
        class="image-preview"
        *ngIf="imagePreview !== '' && imagePreview && form.get('image').valid"
      >
        <img [src]="imagePreview" [alt]="form.value.title" />
      </mat-card-actions>

      <mat-card-actions>
        <button
          type="submit"
          mat-raised-button
          color="accent"
          [disabled]="isLoading"
        >
          {{ mode === 'create' ? 'Add New Job' : '' }}
          {{ mode !== 'create' ? 'Save Changes' : '' }}
          {{ isLoading ? '...loading' : '' }}
        </button>
      </mat-card-actions>
    </form>
  </mat-card-content>
</mat-card>
